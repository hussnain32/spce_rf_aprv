sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","ZSPCE_RF_APRV/ZSPCE_RF_APRV/utils/dataManager","ZSPCE_RF_APRV/ZSPCE_RF_APRV/utils/formatter","sap/m/IconTabFilter","sap/m/Text","sap/m/MessageToast","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/ColumnListItem","sap/m/Input","sap/m/ObjectNumber","sap/m/Label","sap/m/Dialog","sap/m/Button","sap/ui/richtexteditor/RichTextEditor","sap/ui/richtexteditor/EditorType","sap/ui/Device"],function(e,t,a,s,o,r,n,i,d,l,b,u,p,c,v,m,w,y){"use strict";return e.extend("ZSPCE_RF_APRV.ZSPCE_RF_APRV.controller.Master",{arrReqList:[],arr_attachment:[],arr_attachment_oth:[],arr_proposal1:[],arr_proposal2:[],formatter:s,onInit:function(){var e=this;var s=e.getView();var o=new sap.m.BusyDialog;o.open();var r=new t({isNoTouch:!y.support.touch,isTouch:y.support.touch});r.setDefaultBindingMode("OneWay");s.setModel(r,"device");a.getRFList(function(a){var s=JSON.parse(a.IvJson);var o=new t(s);var r=e.byId("shell");r.setModel(o,"oReqList");e.arrReqList=s;var n={ReqList:s.length};var i=new t(n);r.setModel(i,"oCount")},function(e){console.log("error")});e.byId("DetailPageContent").setVisible(false);e.byId("DetailPageMessage").setVisible(true);e.byId("Save").setVisible(false);o.close()},onListF5:function(){var e=this;var s=new sap.m.BusyDialog;s.open();a.getRFList(function(a){var s=JSON.parse(a.IvJson);var o=new t(s);var r=e.byId("shell");r.setModel(o,"oReqList");e.arrReqList=s;var n={ReqList:s.length};var i=new t(n);r.setModel(i,"oCount")},function(e){console.log("error")});e.byId("DetailPageContent").setVisible(false);e.byId("DetailPageMessage").setVisible(true);e.byId("Save").setVisible(false);s.close()},onSearch:function(e){var t=[];var a=e.getSource().getValue();if(a&&a.length>0){t=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("student12",d.Contains,a),new sap.ui.model.Filter("name",d.Contains,a),new sap.ui.model.Filter("form_date",d.Contains,a)],and:false})}var s=this.byId("reqList");var o=s.getBinding("items");o.filter(t,"Application")},reqShow:function(e){var s=this;var o=new sap.m.BusyDialog;o.open();var n=e.getParameters().listItem.mProperties.description;try{var i=n.split(":");i=i[1]}catch(e){console.log(e)}s.arrReqList.forEach(function(e,o){if(e.form_id==i){var n=s.byId("shell");switch(e.status){case"":case undefined:var d="ACM";var b={editable:false,visible:true};var p=new t(b);n.setModel(p,"oTab1");b={editable:true,visible:true};p=new t(b);n.setModel(p,"oTab2");b={editable:false,visible:true};p=new t(b);n.setModel(p,"oTab3");b={editable:false,visible:true};p=new t(b);n.setModel(p,"oTab4");break;case"1":d="FIN";var b={editable:false,visible:true};var p=new t(b);n.setModel(p,"oTab1");b={editable:false,visible:true};p=new t(b);n.setModel(p,"oTab2");b={editable:true,visible:true};p=new t(b);n.setModel(p,"oTab3");b={editable:false,visible:true};p=new t(b);n.setModel(p,"oTab4");break;case"2":d="CAS";var b={editable:false,visible:true};var p=new t(b);n.setModel(p,"oTab1");b={editable:false,visible:true};p=new t(b);n.setModel(p,"oTab2");b={editable:true,visible:true};p=new t(b);n.setModel(p,"oTab3");b={editable:false,visible:true};p=new t(b);n.setModel(p,"oTab4");break;case"3":d="CAS";var b={editable:false,visible:true};var p=new t(b);n.setModel(p,"oTab1");b={editable:false,visible:true};p=new t(b);n.setModel(p,"oTab2");b={editable:false,visible:true};p=new t(b);n.setModel(p,"oTab3");b={editable:false,visible:true};p=new t(b);n.setModel(p,"oTab4");break;default:break}debugger;var c={form_id:e.form_id,approver:d};a.getRF(c,function(o){var n=JSON.parse(JSON.parse(o.IvJson).st_header);var i=new t(n);sap.ui.getCore().byId("Master").setModel(i,"oSTHeaderData");switch(n.status){case"":s.byId("ACMTabBar").setEnabled(true);s.byId("FOTabBar").setEnabled(false);s.byId("CashTabBar").setEnabled(false);s.byId("Save").setVisible(false);s.byId("Approve").setVisible(true);s.byId("Reject").setVisible(true);s.byId("TabBar").setSelectedKey("2");break;case"1":s.byId("ACMTabBar").setEnabled(true);s.byId("FOTabBar").setEnabled(true);s.byId("CashTabBar").setEnabled(false);s.byId("Save").setVisible(false);s.byId("Approve").setVisible(true);s.byId("Reject").setVisible(true);s.byId("TabBar").setSelectedKey("3");break;case"2":s.byId("ACMTabBar").setEnabled(true);s.byId("FOTabBar").setEnabled(true);s.byId("CashTabBar").setEnabled(true);s.byId("Save").setVisible(false);s.byId("Approve").setVisible(true);s.byId("Reject").setVisible(true);s.byId("TabBar").setSelectedKey("4");break;case"C":s.byId("ACMTabBar").setEnabled(true);s.byId("FOTabBar").setEnabled(true);s.byId("CashTabBar").setEnabled(true);s.byId("Approve").setVisible(false);s.byId("Reject").setVisible(false);s.byId("Save").setVisible(false);s.byId("TabBar").setSelectedKey("4");break;default:s.byId("TabBar").setSelectedKey("2");break}switch(s.byId("TabBar").getSelectedKey()){case"1":c={form_id:e.form_id,approver:"INI"};a.getRF(c,function(e){var a=JSON.parse(e.IvJson);i=new t(a);sap.ui.getCore().byId("Master").setModel(i,"oWithdrawal");var o=JSON.parse(JSON.parse(e.IvJson).outstand_debt);i=new t(o);sap.ui.getCore().byId("Master").setModel(i,"outstandDebtTab");var n=s.byId("OutstandTab");var d=new l({cells:[new r({design:"Bold",text:"{outstandDebtTab>course_code}",tooltip:"{outstandDebtTab>course_code}"}),new r({text:"{outstandDebtTab>course_desc}",tooltip:"{outstandDebtTab>course_desc}"}),new r({text:"{outstandDebtTab>intake_no}"}),new u({number:"{ parts: [{ path: 'outstandDebtTab>betrw' }, { path: '' }], type: 'sap.ui.model.type.Currency', formatOptions: { showMeasure: true } }",unit:"{outstandDebtTab>waers}",state:"Success"})]});n.bindItems({path:"outstandDebtTab>/",template:d,templateShareable:true,key:"course_code"}).setKeyboardMode("Navigation")},function(e){console.log("error")});break;case"2":c={form_id:e.form_id,approver:"ACM"};a.getRF(c,function(e){var a=JSON.parse(e.IvJson);var o=new t(a);sap.ui.getCore().byId("Master").setModel(o,"oWithdrawal");var n=JSON.parse(JSON.parse(e.IvJson).outstand_debt);o=new t(n);sap.ui.getCore().byId("Master").setModel(o,"outstandDebtTab");var i=s.byId("ACMOutstandTab");var d=new l({cells:[new r({design:"Bold",text:"{outstandDebtTab>course_code}",tooltip:"{outstandDebtTab>course_code}"}),new r({text:"{outstandDebtTab>course_desc}",tooltip:"{outstandDebtTab>course_desc}"}),new r({text:"{outstandDebtTab>intake_no}"}),new u({number:"{ parts: [{ path: 'outstandDebtTab>betrw' }, { path: '' }], type: 'sap.ui.model.type.Currency', formatOptions: { showMeasure: true } }",unit:"{outstandDebtTab>waers}",state:"Success"})]});i.bindItems({path:"outstandDebtTab>/",template:d,templateShareable:true,key:"course_code"}).setKeyboardMode("Navigation")},function(e){console.log("error")});break;case"3":c={form_id:e.form_id,approver:"FIN"};a.getRF(c,function(e){var a=JSON.parse(e.IvJson);var o=new t(a);sap.ui.getCore().byId("Master").setModel(o,"oWithdrawal");var n=JSON.parse(JSON.parse(e.IvJson).outstand_debt);o=new t(n);sap.ui.getCore().byId("Master").setModel(o,"outstandDebtTab");var i=s.byId("FOOutstandTab");var d=new l({cells:[new r({design:"Bold",text:"{outstandDebtTab>course_code}",tooltip:"{outstandDebtTab>course_code}"}),new r({text:"{outstandDebtTab>course_desc}",tooltip:"{outstandDebtTab>course_desc}"}),new r({text:"{outstandDebtTab>intake_no}"}),new u({number:"{ parts: [{ path: 'outstandDebtTab>betrw' }, { path: '' }], type: 'sap.ui.model.type.Currency', formatOptions: { showMeasure: true } }",unit:"{outstandDebtTab>waers}",state:"Success"})]});i.bindItems({path:"outstandDebtTab>/",template:d,templateShareable:true,key:"course_code"}).setKeyboardMode("Navigation")},function(e){console.log("error")});break;case"4":c={form_id:e.form_id,approver:"CAS"};a.getRF(c,function(e){var a=JSON.parse(e.IvJson);var o=new t(a);sap.ui.getCore().byId("Master").setModel(o,"oWithdrawal");var n=JSON.parse(JSON.parse(e.IvJson).outstand_debt);o=new t(n);sap.ui.getCore().byId("Master").setModel(o,"outstandDebtTab");var i=s.byId("CashOutstandTab");var d=new l({cells:[new r({design:"Bold",text:"{outstandDebtTab>course_code}",tooltip:"{outstandDebtTab>course_code}"}),new r({text:"{outstandDebtTab>course_desc}",tooltip:"{outstandDebtTab>course_desc}"}),new r({text:"{outstandDebtTab>intake_no}"}),new u({number:"{ parts: [{ path: 'outstandDebtTab>betrw' }, { path: '' }], type: 'sap.ui.model.type.Currency', formatOptions: { showMeasure: true } }",unit:"{outstandDebtTab>waers}",state:"Success"})]});i.bindItems({path:"outstandDebtTab>/",template:d,templateShareable:true,key:"course_code"}).setKeyboardMode("Navigation")},function(e){console.log("error")});break;default:break}s.byId("DetailPageContent").setVisible(true);s.byId("DetailPageMessage").setVisible(false);var d=s.byId("SplitContainer");d.setShowSecondaryContent(false)},function(e){console.log("error")});s.byId("Approve").setEnabled(true);s.byId("Reject").setEnabled(true);s.byId("Save").setEnabled(false)}});o.close()},onSelect:function(e){var s=this;var o=new sap.m.BusyDialog;o.open();var n=sap.ui.getCore().byId("Master").getModel("oSTHeaderData").oData;switch(e.mParameters.selectedKey){case"1":s.byId("Approve").setEnabled(false);s.byId("Reject").setEnabled(false);s.byId("Save").setEnabled(false);var i={form_id:n.form_id,approver:"INI"};a.getRF(i,function(e){var a=JSON.parse(e.IvJson);var o=new t(a);sap.ui.getCore().byId("Master").setModel(o,"oWithdrawal");var n=JSON.parse(JSON.parse(e.IvJson).outstand_debt);o=new t(n);sap.ui.getCore().byId("Master").setModel(o,"outstandDebtTab");var i=s.byId("OutstandTab");var d=new l({cells:[new r({design:"Bold",text:"{outstandDebtTab>course_code}",tooltip:"{outstandDebtTab>course_code}"}),new r({text:"{outstandDebtTab>course_desc}",tooltip:"{outstandDebtTab>course_desc}"}),new r({text:"{outstandDebtTab>intake_no}"}),new u({number:"{ parts: [{ path: 'outstandDebtTab>betrw' }, { path: '' }], type: 'sap.ui.model.type.Currency', formatOptions: { showMeasure: true } }",unit:"{outstandDebtTab>waers}",state:"Success"})]});i.bindItems({path:"outstandDebtTab>/",template:d,templateShareable:true,key:"course_code"}).setKeyboardMode("Navigation")},function(e){console.log("error")});break;case"2":switch(n.status){case"":s.byId("Approve").setEnabled(true);s.byId("Reject").setEnabled(true);break;default:s.byId("Approve").setEnabled(false);s.byId("Reject").setEnabled(false);break}i={form_id:n.form_id,approver:"ACM"};a.getRF(i,function(e){var a=JSON.parse(e.IvJson);var o=new t(a);sap.ui.getCore().byId("Master").setModel(o,"oWithdrawal");var n=JSON.parse(JSON.parse(e.IvJson).outstand_debt);o=new t(n);sap.ui.getCore().byId("Master").setModel(o,"outstandDebtTab");var i=s.byId("ACMOutstandTab");var d=new l({cells:[new r({design:"Bold",text:"{outstandDebtTab>course_code}",tooltip:"{outstandDebtTab>course_code}"}),new r({text:"{outstandDebtTab>course_desc}",tooltip:"{outstandDebtTab>course_desc}"}),new r({text:"{outstandDebtTab>intake_no}"}),new u({number:"{ parts: [{ path: 'outstandDebtTab>betrw' }, { path: '' }], type: 'sap.ui.model.type.Currency', formatOptions: { showMeasure: true } }",unit:"{outstandDebtTab>waers}",state:"Success"})]});i.bindItems({path:"outstandDebtTab>/",template:d,templateShareable:true,key:"course_code"}).setKeyboardMode("Navigation")},function(e){console.log("error")});break;case"3":switch(n.status){case"1":s.byId("Approve").setEnabled(true);s.byId("Reject").setEnabled(true);break;default:s.byId("Approve").setEnabled(false);s.byId("Reject").setEnabled(false);break}i={form_id:n.form_id,approver:"FIN"};a.getRF(i,function(e){var a=JSON.parse(e.IvJson);var o=new t(a);sap.ui.getCore().byId("Master").setModel(o,"oWithdrawal");var n=JSON.parse(JSON.parse(e.IvJson).outstand_debt);o=new t(n);sap.ui.getCore().byId("Master").setModel(o,"outstandDebtTab");var i=s.byId("FOOutstandTab");var d=new l({cells:[new r({design:"Bold",text:"{outstandDebtTab>course_code}",tooltip:"{outstandDebtTab>course_code}"}),new r({text:"{outstandDebtTab>course_desc}",tooltip:"{outstandDebtTab>course_desc}"}),new r({text:"{outstandDebtTab>intake_no}"}),new u({number:"{ parts: [{ path: 'outstandDebtTab>betrw' }, { path: '' }], type: 'sap.ui.model.type.Currency', formatOptions: { showMeasure: true } }",unit:"{outstandDebtTab>waers}",state:"Success"})]});i.bindItems({path:"outstandDebtTab>/",template:d,templateShareable:true,key:"course_code"}).setKeyboardMode("Navigation")},function(e){console.log("error")});break;case"4":switch(n.appr_lvl){case"2":s.byId("Approve").setEnabled(false);s.byId("Reject").setEnabled(false);break;default:s.byId("Approve").setEnabled(false);s.byId("Reject").setEnabled(false);s.byId("Save").setEnabled(false);break}i={form_id:n.form_id,approver:"CAS"};a.getRF(i,function(e){var a=JSON.parse(e.IvJson);var o=new t(a);sap.ui.getCore().byId("Master").setModel(o,"oWithdrawal");var n=JSON.parse(JSON.parse(e.IvJson).outstand_debt);o=new t(n);sap.ui.getCore().byId("Master").setModel(o,"outstandDebtTab");var i=s.byId("CashOutstandTab");var d=new l({cells:[new r({design:"Bold",text:"{outstandDebtTab>course_code}",tooltip:"{outstandDebtTab>course_code}"}),new r({text:"{outstandDebtTab>course_desc}",tooltip:"{outstandDebtTab>course_desc}"}),new r({text:"{outstandDebtTab>intake_no}"}),new u({number:"{ parts: [{ path: 'outstandDebtTab>betrw' }, { path: '' }], type: 'sap.ui.model.type.Currency', formatOptions: { showMeasure: true } }",unit:"{outstandDebtTab>waers}",state:"Success"})]});i.bindItems({path:"outstandDebtTab>/",template:d,templateShareable:true,key:"course_code"}).setKeyboardMode("Navigation")},function(e){console.log("error")});break;default:break}o.close()},handleToggleSecondaryContent:function(e){var t=this.byId("SplitContainer");t.setShowSecondaryContent(!t.getShowSecondaryContent())},b64toBlob:function(e,t,a){t=t||"";a=a||512;var s=atob(e);var o=[];for(var r=0;r<s.length;r+=a){var n=s.slice(r,r+a);var i=new Array(n.length);for(var d=0;d<n.length;d++){i[d]=n.charCodeAt(d)}var l=new Uint8Array(i);o.push(l)}var b=new Blob(o,{type:t});return b},UploadedFileShow:function(e){var t=this;var a=e.getParameters().listItem.mProperties.title;t.arr_attachment.forEach(function(e,s){if(e.filename===a){if(t.arr_attachment[s].mimetype.toLowerCase()==="jpeg"||t.arr_attachment[s].mimetype.toLowerCase()==="jpg"){var o=t.b64toBlob(t.arr_attachment[s].value,"image/jpeg");var r=URL.createObjectURL(o);window.open(r)}else if(t.arr_attachment[s].mimetype.toLowerCase()==="pdf"){var o=t.b64toBlob(t.arr_attachment[s].value,"application/pdf");var r=URL.createObjectURL(o);window.open(r)}else if(t.arr_attachment[s].mimetype.toLowerCase()==="png"){var o=t.b64toBlob(t.arr_attachment[s].value,"image/png");var r=URL.createObjectURL(o);window.open(r)}else if(t.arr_attachment[s].mimetype.toLowerCase()==="xls"||t.arr_attachment[s].mimetype.toLowerCase()==="xlsx"){var o=t.b64toBlob(t.arr_attachment[s].value,"application/vnd.ms-excel");var r=URL.createObjectURL(o);window.open(r)}else if(t.arr_attachment[s].mimetype.toLowerCase()==="doc"||t.arr_attachment[s].mimetype.toLowerCase()==="docx"){var o=t.b64toBlob(t.arr_attachment[s].value,"application/msword");var r=URL.createObjectURL(o);window.open(r)}else if(t.arr_attachment[s].mimetype.toLowerCase()==="ppt"){var o=t.b64toBlob(t.arr_attachment[s].value,"application/vnd.ms-powerpoint");var r=URL.createObjectURL(o);window.open(r)}else if(t.arr_attachment[s].mimetype.toLowerCase()==="txt"){var o=t.b64toBlob(t.arr_attachment[s].value,"text/plain");var r=URL.createObjectURL(o);window.open(r)}}})},oth_UploadedFileShow:function(e){var t=this;var a=e.getParameters().listItem.mProperties.title;t.arr_attachment_oth.forEach(function(e,s){if(e.filename===a){if(t.arr_attachment_oth[s].mimetype.toLowerCase()==="jpeg"||t.arr_attachment_oth[s].mimetype.toLowerCase()==="jpg"){var o=t.b64toBlob(t.arr_attachment_oth[s].value,"image/jpeg");var r=URL.createObjectURL(o);window.open(r)}else if(t.arr_attachment_oth[s].mimetype.toLowerCase()==="pdf"){var o=t.b64toBlob(t.arr_attachment_oth[s].value,"application/pdf");var r=URL.createObjectURL(o);window.open(r)}else if(t.arr_attachment_oth[s].mimetype.toLowerCase()==="png"){var o=t.b64toBlob(t.arr_attachment_oth[s].value,"image/png");var r=URL.createObjectURL(o);window.open(r)}else if(t.arr_attachment_oth[s].mimetype.toLowerCase()==="xls"||t.arr_attachment_oth[s].mimetype.toLowerCase()==="xlsx"){var o=t.b64toBlob(t.arr_attachment_oth[s].value,"application/vnd.ms-excel");var r=URL.createObjectURL(o);window.open(r)}else if(t.arr_attachment_oth[s].mimetype.toLowerCase()==="doc"||t.arr_attachment_oth[s].mimetype.toLowerCase()==="docx"){var o=t.b64toBlob(t.arr_attachment_oth[s].value,"application/msword");var r=URL.createObjectURL(o);window.open(r)}else if(t.arr_attachment_oth[s].mimetype.toLowerCase()==="ppt"){var o=t.b64toBlob(t.arr_attachment_oth[s].value,"application/vnd.ms-powerpoint");var r=URL.createObjectURL(o);window.open(r)}else if(t.arr_attachment_oth[s].mimetype.toLowerCase()==="txt"){var o=t.b64toBlob(t.arr_attachment_oth[s].value,"text/plain");var r=URL.createObjectURL(o);window.open(r)}}})},validateEventFeedbackForm:function(e){var t=this;var a=true;e.forEach(function(e){var s=t.getView().byId(e);if(s.getValue()==""||s.getValue()==undefined){a=false;s.setValueState("Warning")}else{s.setValueState("None")}});return a},onAction:function(e){var s=this;var o=e.getSource();var r=o.getId();switch(r){case"Master--Approve":var n="Approve";var i="X";break;case"Master--Reject":n="Reject";i="0";break;case"Master--Save":n="Save";break;default:break}switch(s.byId("TabBar").getSelectedKey()){case"2":var d=sap.ui.getCore().byId("Master").getModel("oWithdrawal").oData;break;case"3":d=sap.ui.getCore().byId("Master").getModel("oWithdrawal").oData;break;case"4":d=sap.ui.getCore().byId("Master").getModel("oWithdrawal").oData;break;default:break}d.status=i;var l="Do you want to "+n+" Application?";debugger;var b=new c({title:n+" SPCE Fee Refund",type:"Message",state:"Warning",content:[new p({text:l})],beginButton:new v({type:sap.m.ButtonType.Emphasized,text:"Yes",press:function(){var e=new sap.m.BusyDialog;e.open();a.postRFApproval(d,function(o){switch(JSON.parse(o.IvJson).msg_typ){case"S":sap.m.MessageBox.show(JSON.parse(o.IvJson).msg,{icon:sap.m.MessageBox.Icon.SUCCESS,title:"Success",actions:[sap.m.MessageBox.Action.CLOSE],onClose:function(e){}});a.getRFList(function(e){var a=JSON.parse(e.IvJson);var o=new t(a);var r=s.byId("shell");r.setModel(o,"oReqList");s.arrReqList=a;var n={ReqList:a.length};var i=new t(n);r.setModel(i,"oCount")},function(e){console.log("error")});s.byId("DetailPageContent").setVisible(false);s.byId("DetailPageMessage").setVisible(true);s.byId("Save").setVisible(false);var r=s.byId("SplitContainer");r.setShowSecondaryContent(true);break;case"E":sap.m.MessageBox.show(JSON.parse(o.IvJson).msg,{icon:sap.m.MessageBox.Icon.ERROR,title:"Error",actions:[sap.m.MessageBox.Action.CLOSE],onClose:function(e){}});break;default:break}e.close()},function(t){e.close();sap.m.MessageBox.show(t.message,{icon:sap.m.MessageBox.Icon.ERROR,title:"Error",actions:[sap.m.MessageBox.Action.CLOSE],onClose:function(e){}})});b.close()}}),endButton:new v({text:"No",press:function(){b.close()}}),afterClose:function(){b.destroy()}});b.open()},onCashDesk:function(e){window.open("https://kurak.ucentralasia.org:8200/sap/bc/ui5_ui5/ui2/ushell/shells/abap/Fiorilaunchpad.html?saml2=disabled#CACashJournal-display","_blank")},onSetEmail:function(e){var t=this;var a=sap.ui.getCore().byId("Master").getModel("RFHeader").oData;var s="<p>Dear <i><b>"+a.st_name+"</b></i>,</p>"+"[Email content here!]<br><br>"+"<span>Regards,</span><br>"+"<span><b>UCA</b></span>"},onF4RFType:function(e){window.helpinput=e.getParameters().id;var s=function(){return[new sap.m.Column({hAlign:"Left",header:new sap.m.Label({text:"Type Code"})}),new sap.m.Column({hAlign:"Left",header:new sap.m.Label({text:"Type Name"})})]};var o=new sap.m.TableSelectDialog("",{title:"Select Refund Type",noDataText:"No Records Found",contentWidth:"20%",contentHeight:"25%",draggable:true,growingThreshold:5,search:function(e){var t=e.mParameters.value;var a=new sap.ui.model.Filter("type",sap.ui.model.FilterOperator.Contains,t);var s=e.getSource().getBinding("items");s.filter([a]);if(s.aIndices.length==0){var a=new sap.ui.model.Filter("type_t",sap.ui.model.FilterOperator.Contains,t);var s=e.getSource().getBinding("items");s.filter([a])}if(t===""){s.filter([])}},liveChange:function(e){var t=e.mParameters.value;var a=new sap.ui.model.Filter("type",sap.ui.model.FilterOperator.Contains,t);var s=e.getSource().getBinding("items");s.filter([a]);if(s.aIndices.length==0){var a=new sap.ui.model.Filter("type_t",sap.ui.model.FilterOperator.Contains,t);var s=e.getSource().getBinding("items");s.filter([a])}if(t===""){s.filter([])}},columns:[s()]});var r=new sap.m.ColumnListItem({type:"Active",unread:false,cells:[new sap.m.Label({text:"{type}"}),new sap.m.Label({text:"{type_t}"})]});var n=new sap.ui.model.json.JSONModel;var i=[{type:"1",type_t:"Tuition Refund"},{type:"2",type_t:"Exam Refund"}];n.setData(i);o.setModel(n);o.bindAggregation("items","/",r);o.attachConfirm(function(e){var s=e.getParameter("selectedItem");if(s){var o=s.getCells();sap.ui.getCore().byId(window.helpinput).setValue(o[0].getText());var r=new sap.m.BusyDialog;r.open();var n=sap.ui.getCore().byId("main").getModel("oWithdrawal").oData;a.onRFType(n,function(e){var a=JSON.parse(e.IvJson);var s=new t(a);sap.ui.getCore().byId("main").setModel(s,"oWithdrawal");switch(a.is_rf_entit){case"X":var o=sap.ui.getCore().byId("main").byId("stReq");o.setEnabled(true);break;default:var o=sap.ui.getCore().byId("main").byId("stReq");o.setEnabled(false);break}},function(e){console.log("error")});r.close()}});o.open()},onHoursCal:function(e){var s=new sap.m.BusyDialog;s.open();var o=sap.ui.getCore().byId("Master").getModel("oWithdrawal").oData;o.msg_typ="";o.msg="";a.calHours(o,function(e){var a=JSON.parse(e.IvJson);switch(a.msg_typ){case"S":var s=sap.ui.getCore().byId("Shell");var a=JSON.parse(e.IvJson);var o=new t(a);sap.ui.getCore().byId("Master").setModel(o,"oWithdrawal");break;default:break}},function(e){console.log("error")});s.close()}})});